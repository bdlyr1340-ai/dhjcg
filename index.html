<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f1115" />
  <meta name="description" content="حلا الحداد — لجميع أنواع الحدادة والديكورات وتنصيب منضومات الطاقة الشمسية. تواصل واتساب مباشرة." />
  <title>حلا الحداد | حدادة + ديكورات + طاقة شمسية</title>

  <style>
    :root{
      --bg:#0f1115;
      --panel:#151a21;
      --text:#f2f4f7;
      --muted:#aab3c2;
      --accent:#ff7a18;
      --wa:#25D366;
      --border:rgba(255,255,255,.10);
      --shadow: 0 24px 70px rgba(0,0,0,.55);
      --shadow2: 0 14px 40px rgba(0,0,0,.45);
      --radius:18px;
      --radius2:22px;
      --max: 1140px;
      --ease: cubic-bezier(.2,.8,.2,1);
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      color:var(--text);
      background: var(--bg);
      font-family: system-ui, -apple-system, "Segoe UI", "Noto Kufi Arabic", "Noto Sans Arabic", Tahoma, Arial, sans-serif;
      line-height:1.65;
      overflow-x:hidden;
    }

    /* Ambient + steel texture (CSS only) */
    .bg-ambient{
      position:fixed; inset:0; z-index:-4; pointer-events:none;
      background:
        radial-gradient(1200px 650px at 18% -10%, rgba(255,122,24,.22), transparent 60%),
        radial-gradient(1000px 620px at 90% 10%, rgba(255,122,24,.12), transparent 58%),
        radial-gradient(900px 700px at 70% 120%, rgba(37,211,102,.08), transparent 55%),
        radial-gradient(900px 520px at 8% 92%, rgba(255,255,255,.05), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,.02), transparent 24%, rgba(0,0,0,.30));
      filter:saturate(1.08) contrast(1.02);
    }
    .bg-steel{
      position:fixed; inset:0; z-index:-3; pointer-events:none;
      opacity:.22;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,.020) 0 1px, transparent 1px 12px),
        repeating-linear-gradient(0deg, rgba(255,255,255,.015) 0 1px, transparent 1px 18px);
      mix-blend-mode: overlay;
    }
    .bg-noise{
      position:fixed; inset:-40%; z-index:-2; pointer-events:none;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,.022) 0px, rgba(255,255,255,.022) 1px, transparent 2px, transparent 4px),
        repeating-linear-gradient(90deg, rgba(255,255,255,.016) 0px, rgba(255,255,255,.016) 1px, transparent 2px, transparent 6px);
      transform:rotate(6deg);
      opacity:.10;
      mix-blend-mode:overlay;
    }

    a{color:inherit}
    .wrap{max-width:var(--max); margin:0 auto; padding:0 20px}

    /* Progress */
    .progress{
      height: 2px;
      background: linear-gradient(90deg, rgba(255,122,24,.0), rgba(255,122,24,.90), rgba(37,211,102,.55));
      width: 0%;
      position:absolute;
      left:0; bottom:-1px;
      opacity:.92;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.35));
    }

    /* Header */
    .header{
      position:sticky; top:0; z-index:80;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background: rgba(15,17,21,.70);
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .header-inner{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px;
      padding: 14px 0;
      position:relative;
      transition: padding .28s var(--ease);
    }
    .header.is-compact .header-inner{padding: 10px 0}

    .brand{
      display:flex; align-items:center; gap:12px;
      min-width: 260px;
    }

    /* لوغو: احفظ الصورة اللي ارسلتها داخل نفس المشروع بهذا المسار:
       images/IMG-20260103-WA0031.jpg
    */
    .logo{
      width:56px; height:56px; border-radius:16px;
      border:1px solid var(--border);
      box-shadow: 0 14px 36px rgba(0,0,0,.42);
      object-fit:cover;
      background: rgba(255,255,255,.03);
      flex: 0 0 auto;
    }

    .brand-text{display:flex; flex-direction:column}
    .brand-title{
      font-size: 18px; font-weight: 1000; letter-spacing:.1px;
      line-height:1.15;
      text-shadow: 0 18px 55px rgba(0,0,0,.45);
    }
    .brand-subtitle{
      margin-top: 3px;
      color: var(--muted);
      font-size: 12.6px;
      max-width: 620px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow:hidden;
    }

    .nav{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .nav a{
      text-decoration:none;
      color: rgba(242,244,247,.92);
      font-weight: 950;
      font-size: 13.5px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      transition: transform .18s var(--ease), border-color .18s var(--ease), background .18s var(--ease);
      display:inline-flex; align-items:center; gap:8px;
    }
    .nav a:hover{
      transform: translateY(-1px);
      border-color: rgba(255,122,24,.45);
      background: rgba(255,122,24,.08);
    }
    .nav a:focus-visible{outline:2px solid rgba(255,122,24,.75); outline-offset:2px}

    .social{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .icon-btn{
      width:42px; height:42px;
      display:inline-grid; place-items:center;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      transition: transform .18s var(--ease), border-color .18s var(--ease), background .18s var(--ease);
      text-decoration:none;
    }
    .icon-btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,122,24,.45);
      background: rgba(255,122,24,.08);
    }
    .icon-btn:focus-visible{outline:2px solid rgba(255,122,24,.75); outline-offset:2px}
    .icon{
      width:18px; height:18px; opacity:.95;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.35));
    }
    .icon-btn.whatsapp{
      border-color: rgba(37,211,102,.35);
      background: rgba(37,211,102,.10);
    }
    .icon-btn.whatsapp:hover{
      border-color: rgba(37,211,102,.65);
      background: rgba(37,211,102,.15);
    }

    /* Sections */
    section{padding: 28px 0}
    .section-head{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap: 16px;
      margin-bottom: 14px;
    }
    .h2{
      font-size: 20px;
      margin:0;
      font-weight: 1100;
      letter-spacing:.2px;
    }
    .hint{
      margin:0;
      color: var(--muted);
      font-size: 13.5px;
    }

    /* Hero */
    .hero{position:relative; padding: 32px 0 18px}
    .hero-shell{
      position:relative;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(900px 420px at 25% 10%, rgba(255,122,24,.22), transparent 60%),
        radial-gradient(740px 360px at 85% 35%, rgba(255,255,255,.05), transparent 60%),
        linear-gradient(180deg, rgba(255,122,24,.10), rgba(255,255,255,.02) 26%, rgba(21,26,33,.92));
      box-shadow: var(--shadow);
      overflow:hidden;
      padding: 26px 22px;
      isolation:isolate;
    }
    .hero-shell::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(540px 260px at 0% 0%, rgba(255,122,24,.24), transparent 60%),
        radial-gradient(460px 240px at 100% 10%, rgba(255,122,24,.14), transparent 65%),
        radial-gradient(540px 320px at 20% 120%, rgba(37,211,102,.10), transparent 62%);
      opacity:.85;
      z-index:-2;
      filter: blur(18px);
    }
    .hero-shell::after{
      content:"";
      position:absolute; inset:-60px;
      background:
        conic-gradient(from 220deg at 45% 45%,
          transparent 0 14%,
          rgba(255,122,24,.22) 14% 16%,
          transparent 16% 34%,
          rgba(255,122,24,.14) 34% 38%,
          transparent 38% 66%,
          rgba(255,255,255,.06) 66% 68%,
          transparent 68% 100%);
      opacity:.30;
      z-index:-1;
      filter: blur(10px);
      animation: drift 10s var(--ease) infinite alternate;
    }
    @keyframes drift{
      from{ transform: translate(-10px,-12px) rotate(0deg) }
      to{ transform: translate(16px,14px) rotate(14deg) }
    }

    .hero-grid{
      position:relative;
      display:grid;
      grid-template-columns: 1.35fr .65fr;
      gap: 16px;
      align-items:stretch;
      z-index:2;
    }

    .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(242,244,247,.88);
      font-size: 12.5px;
      font-weight: 950;
      white-space:nowrap;
    }
    .chip-dot{
      width:8px; height:8px; border-radius:999px;
      background: rgba(255,122,24,.95);
      box-shadow: 0 0 0 6px rgba(255,122,24,.12);
      flex:0 0 auto;
    }

    .hero-title{
      font-size: clamp(28px, 3.2vw, 44px);
      line-height:1.12;
      margin: 12px 0 10px;
      font-weight: 1200;
      letter-spacing:.2px;
    }
    .hero-desc{
      margin:0 0 14px;
      color: rgba(242,244,247,.86);
      max-width: 70ch;
      font-size: 15.5px;
    }

    .cta-row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 12px;
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 1000;
      text-decoration:none;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      color: var(--text);
      transition: transform .18s var(--ease), border-color .18s var(--ease), background .18s var(--ease), box-shadow .18s var(--ease);
      box-shadow: 0 12px 28px rgba(0,0,0,.35);
      will-change: transform;
      cursor:pointer;
    }
    .btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,122,24,.50);
      background: rgba(255,122,24,.10);
      box-shadow: 0 18px 44px rgba(0,0,0,.45);
    }
    .btn:focus-visible{outline:2px solid rgba(255,122,24,.75); outline-offset:2px}

    .btn.primary{
      border-color: rgba(37,211,102,.35);
      background: rgba(37,211,102,.16);
      color: #061c0f;
      box-shadow: 0 18px 44px rgba(0,0,0,.45);
    }
    .btn.primary:hover{
      border-color: rgba(37,211,102,.75);
      background: rgba(37,211,102,.20);
      transform: translateY(-1px);
    }

    .side-card{
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(21,26,33,.72);
      box-shadow: var(--shadow2);
      padding: 16px 16px;
      overflow:hidden;
      position:relative;
      --mx: 50%;
      --my: 30%;
    }
    .side-card::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(540px 260px at var(--mx) var(--my), rgba(255,122,24,.18), transparent 60%),
        linear-gradient(120deg, rgba(255,122,24,.14), transparent 40%),
        linear-gradient(240deg, rgba(255,255,255,.06), transparent 45%);
      opacity:.9;
      z-index:-1;
      filter: blur(10px);
    }
    .kpi{display:grid; grid-template-columns: 1fr; gap: 10px}
    .kpi-item{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .kpi-title{font-weight: 1100; font-size: 14px; margin:0 0 2px}
    .kpi-sub{margin:0; color: var(--muted); font-size: 13px}

    /* Sparks canvas */
    #sparks{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      z-index:1;
      pointer-events:none;
      opacity:.85;
      mix-blend-mode: screen;
    }

    /* Cards grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
    }
    .card{
      grid-column: span 4;
      background: rgba(21,26,33,.78);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      padding: 16px 16px;
      box-shadow: 0 16px 44px rgba(0,0,0,.35);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
      --mx: 50%;
      --my: 30%;
      transition: transform .20s var(--ease), border-color .20s var(--ease);
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background: radial-gradient(520px 240px at var(--mx) var(--my), rgba(255,122,24,.18), transparent 60%);
      opacity:.9;
      z-index:-1;
      filter: blur(12px);
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(255,122,24,.35);
    }
    .card-title{
      margin:0 0 6px;
      font-weight: 1100;
      font-size: 15.5px;
      letter-spacing:.15px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .card-desc{
      margin:0;
      color: rgba(242,244,247,.78);
      font-size: 13.5px;
    }
    .svc-ico{
      width:18px; height:18px;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.35));
      opacity:.95;
    }

    /* Examples chips (بدون اقتراحات) */
    .chips{
      display:flex;
      flex-wrap:wrap;
      gap: 10px;
      margin-top: 12px;
    }
    .chip2{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(242,244,247,.90);
      font-weight: 1000;
      font-size: 13.5px;
      user-select:none;
    }

    /* Process */
    .timeline{
      grid-column: span 12;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(21,26,33,.70);
      box-shadow: var(--shadow2);
      overflow:hidden;
      position:relative;
    }
    .timeline::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(900px 320px at 10% 0%, rgba(255,122,24,.16), transparent 62%),
        radial-gradient(700px 260px at 90% 20%, rgba(37,211,102,.10), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.04), transparent 35%);
      opacity:.9;
      z-index:-1;
      filter: blur(10px);
    }
    .steps{display:grid; grid-template-columns: repeat(4, 1fr)}
    .step{
      padding: 16px 16px 18px;
      border-left: 1px solid rgba(255,255,255,.08);
      position:relative;
    }
    .step:last-child{border-left:0}
    .step-num{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:34px; height:34px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.20);
      font-weight: 1100;
      margin-bottom: 10px;
    }
    .step-title{margin:0 0 6px; font-weight: 1100}
    .step-desc{margin:0; color: rgba(242,244,247,.78); font-size: 13.5px}

    /* Request form panel */
    .panel{
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(21,26,33,.70);
      box-shadow: var(--shadow);
      padding: 16px;
      position:relative;
      overflow:hidden;
    }
    .panel::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(900px 340px at 15% 0%, rgba(255,122,24,.16), transparent 62%),
        radial-gradient(700px 260px at 90% 20%, rgba(37,211,102,.10), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.04), transparent 35%);
      opacity:.9;
      z-index:-1;
      filter: blur(10px);
    }

    .form-grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      align-items: start;
      position:relative;
      z-index:2;
    }
    .field{grid-column: span 6}
    .field.full{grid-column: span 12}

    label{
      display:block;
      font-size: 13px;
      font-weight: 1000;
      color: rgba(242,244,247,.90);
      margin-bottom: 6px;
    }
    input, select, textarea{
      width:100%;
      background: rgba(255,255,255,.03);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.10);
      border-radius: 14px;
      padding: 12px 12px;
      outline: none;
      transition: border-color .18s var(--ease), background .18s var(--ease);
      font: inherit;
      font-size: 14px;
    }
    textarea{min-height: 110px; resize: vertical}
    input:focus, select:focus, textarea:focus{
      border-color: rgba(255,122,24,.55);
      background: rgba(255,122,24,.06);
    }

    .actions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
      margin-top: 10px;
    }
    .note{
      color: var(--muted);
      font-size: 13px;
      margin: 10px 0 0;
    }
    .preview{
      margin-top: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      padding: 12px 12px;
      color: rgba(242,244,247,.86);
      font-size: 13.5px;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .status{
      margin-top: 10px;
      color: rgba(242,244,247,.84);
      font-size: 13px;
      font-weight: 900;
      opacity:.0;
      transform: translateY(6px);
      transition: opacity .25s var(--ease), transform .25s var(--ease);
    }
    .status.on{opacity:1; transform: translateY(0)}

    .hidden{display:none !important;}

    /* Contact pills */
    .contact-row{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
      margin-top: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      color: rgba(242,244,247,.90);
      font-weight: 1000;
      text-decoration:none;
      transition: transform .18s var(--ease), border-color .18s var(--ease), background .18s var(--ease);
    }
    .pill .mini{width:16px; height:16px; opacity:.92}
    .pill:hover{
      border-color: rgba(255,122,24,.38);
      background: rgba(255,122,24,.08);
      transform: translateY(-1px);
    }
    .pill.wh{
      border-color: rgba(37,211,102,.30);
      background: rgba(37,211,102,.12);
      color:#061c0f;
    }
    .pill.wh:hover{
      border-color: rgba(37,211,102,.70);
      background: rgba(37,211,102,.18);
    }

    /* Floating WhatsApp */
    .wa-float{
      position:fixed;
      right: 18px;
      bottom: 18px;
      z-index: 90;
      width: 58px;
      height: 58px;
      border-radius: 999px;
      background: var(--wa);
      border: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 18px 55px rgba(0,0,0,.52);
      display:grid; place-items:center;
      text-decoration:none;
      transition: transform .18s var(--ease), filter .18s var(--ease);
    }
    .wa-float:hover{transform: translateY(-2px); filter: brightness(1.04)}
    .wa-float:focus-visible{outline:2px solid rgba(37,211,102,.75); outline-offset:3px}
    .wa-icon{width:22px; height:22px; color:#061c0f}
    .wa-tip{
      position:absolute;
      left: 68px;
      white-space:nowrap;
      background: rgba(15,17,21,.84);
      border: 1px solid rgba(255,255,255,.10);
      padding: 8px 10px;
      border-radius: 999px;
      color: rgba(242,244,247,.92);
      font-weight: 1000;
      font-size: 12.5px;
      opacity: 0;
      transform: translateX(8px);
      pointer-events:none;
      transition: opacity .18s var(--ease), transform .18s var(--ease);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .wa-float:hover .wa-tip{opacity:1; transform: translateX(0)}

    /* Footer */
    footer{padding: 20px 0 84px; color: rgba(242,244,247,.72)}
    .footer{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; flex-wrap:wrap;
      border-top: 1px solid rgba(255,255,255,.07);
      padding-top: 16px;
    }

    /* Reveal */
    .reveal{
      opacity:0;
      transform: translateY(10px);
      transition: opacity .55s var(--ease), transform .55s var(--ease);
    }
    .reveal.is-in{opacity:1; transform: translateY(0)}

    /* Responsive */
    @media (max-width: 980px){
      .hero-grid{grid-template-columns: 1fr}
      .steps{grid-template-columns: 1fr 1fr}
      .step{border-left: 1px solid rgba(255,255,255,.08)}
      .step:nth-child(2), .step:nth-child(4){border-left:0}
    }
    @media (max-width: 900px){
      .card{grid-column: span 6}
    }
    @media (max-width: 620px){
      .header-inner{flex-direction:column; align-items:flex-start}
      .nav{width:100%; justify-content:flex-start}
      .social{width:100%; justify-content:flex-start}
      .logo{width:52px; height:52px}
      .card{grid-column: span 12}
      .steps{grid-template-columns: 1fr}
      .step{border-left:0; border-top: 1px solid rgba(255,255,255,.08)}
      .step:first-child{border-top:0}
      .wa-float{right: 14px; bottom: 14px}
      .wa-tip{display:none}
      .field{grid-column: span 12}
    }

    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important}
      html{scroll-behavior:auto}
    }
  </style>
</head>

<body>
  <div class="bg-ambient" aria-hidden="true"></div>
  <div class="bg-steel" aria-hidden="true"></div>
  <div class="bg-noise" aria-hidden="true"></div>

  <header class="header" id="top">
    <div class="wrap">
      <div class="header-inner">
        <div class="brand" aria-label="الهوية">
          <img class="logo" src="images/IMG-20260103-WA0031.jpg" alt="لوغو حلا الحداد" />
          <div class="brand-text">
            <div class="brand-title">حلا الحداد</div>
            <div class="brand-subtitle">لجميع أنواع الحدادة والديكورات وتنصيب منضومات الطاقة الشمسية</div>
          </div>
        </div>

        <nav class="nav" aria-label="روابط داخل الصفحة">
          <a href="#services">الخدمات</a>
          <a href="#process">طريقة الشغل</a>
          <a href="#request">طلب سريع</a>
          <a href="#contact">التواصل</a>
        </nav>

        <div class="social" aria-label="روابط السوشيال ميديا">
          <a class="icon-btn" href="https://www.facebook.com/profile.php?id=61576592007081&mibextid=ZbWKwL" target="_blank" rel="noopener" aria-label="فيسبوك">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M13.5 22v-8h2.7l.4-3h-3.1V9.1c0-.9.3-1.6 1.7-1.6h1.5V4.8c-.7-.1-1.6-.2-2.7-.2-2.7 0-4.6 1.7-4.6 4.8V11H7v3h2.4v8h4.1Z"/>
            </svg>
          </a>

          <a class="icon-btn" href="https://www.instagram.com/halaalhadad1?igsh=Nm44ZzVqemFlN3Vw" target="_blank" rel="noopener" aria-label="إنستغرام">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M7.8 2h8.4A5.8 5.8 0 0 1 22 7.8v8.4A5.8 5.8 0 0 1 16.2 22H7.8A5.8 5.8 0 0 1 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2Zm0 2A3.8 3.8 0 0 0 4 7.8v8.4A3.8 3.8 0 0 0 7.8 20h8.4A3.8 3.8 0 0 0 20 16.2V7.8A3.8 3.8 0 0 0 16.2 4H7.8Zm4.2 4.3A3.7 3.7 0 1 1 8.3 12 3.7 3.7 0 0 1 12 8.3Zm0 2A1.7 1.7 0 1 0 13.7 12 1.7 1.7 0 0 0 12 10.3ZM17.7 6.7a.9.9 0 1 1-.9-.9.9.9 0 0 1 .9.9Z"/>
            </svg>
          </a>

          <a class="icon-btn" href="https://tiktok.com/@halaalhadad111" target="_blank" rel="noopener" aria-label="تيك توك">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M16.6 2c.4 2.6 2 4.4 4.4 4.6v3.2c-1.6.1-3-.3-4.4-1.2v6.2c0 3.8-3.1 6.9-6.9 6.9S2.8 18.6 2.8 14.8c0-3.8 3.1-6.9 6.9-6.9.4 0 .8 0 1.2.1v3.5c-.4-.1-.8-.2-1.2-.2-1.9 0-3.5 1.6-3.5 3.5 0 1.9 1.6 3.5 3.5 3.5 2 0 3.7-1.6 3.7-4V2h3.2Z"/>
            </svg>
          </a>

          <a class="icon-btn whatsapp" href="https://wa.me/9647766831610" target="_blank" rel="noopener" aria-label="واتساب">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path fill="currentColor" d="M12 2a9.8 9.8 0 0 0-9.8 9.8c0 1.7.4 3.3 1.2 4.8L2 22l5.6-1.4c1.4.7 2.9 1.1 4.4 1.1A9.8 9.8 0 0 0 21.8 12 9.8 9.8 0 0 0 12 2Zm0 17.7c-1.3 0-2.6-.3-3.7-.9l-.3-.2-3.3.8.9-3.2-.2-.3c-.7-1.2-1.1-2.6-1.1-4A7.7 7.7 0 1 1 12 19.7Zm4.6-5.1c-.3-.1-1.7-.8-2-.9s-.5-.1-.7.1-.8.9-1 1.1-.4.2-.7.1c-.3-.1-1.3-.5-2.4-1.6-.9-.8-1.5-1.9-1.7-2.2s0-.5.1-.7l.5-.6c.2-.2.2-.4.3-.6s0-.4 0-.6-.7-1.7-1-2.3c-.3-.6-.6-.5-.7-.5h-.6c-.2 0-.6.1-.9.4s-1.2 1.1-1.2 2.8 1.2 3.2 1.4 3.4c.2.2 2.4 3.6 5.9 5 .8.3 1.4.5 1.9.6.8.2 1.5.2 2.1.1.6-.1 1.7-.7 2-1.3.2-.6.2-1.2.2-1.3s-.2-.2-.5-.3Z"/>
            </svg>
          </a>
        </div>

        <div class="progress" id="progress" aria-hidden="true"></div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <section class="hero" id="home">
      <div class="hero-shell reveal" data-spotlight>
        <canvas id="sparks" aria-hidden="true"></canvas>

        <div class="hero-grid">
          <div>
            <div class="chip" aria-label="وعد الخدمة">
              <span class="chip-dot" aria-hidden="true"></span>
              حدادة • ديكورات • طاقة شمسية
            </div>

            <h1 class="hero-title">حلا الحداد — شغل يعتمد عليه</h1>
            <p class="hero-desc">
              لجميع أنواع الحدادة والديكورات وتنصيب منضومات الطاقة الشمسية.
              اكتب طلبك هنا، والرسالة تنجهز تلقائياً للواتساب حتى يصير التواصل سريع وواضح.
            </p>

            <div class="cta-row" role="group" aria-label="أزرار">
              <a class="btn primary" href="#request">طلب سريع</a>
              <a class="btn" href="https://wa.me/9647766831610" target="_blank" rel="noopener">تواصل واتساب</a>
              <a class="btn" href="#services">استعرض الخدمات</a>
            </div>
          </div>

          <aside class="side-card reveal" data-spotlight aria-label="مميزات">
            <div class="kpi">
              <div class="kpi-item">
                <p class="kpi-title">تنفيذ حسب الحاجة</p>
                <p class="kpi-sub">تحديد المطلوب بشكل واضح قبل التنفيذ.</p>
              </div>
              <div class="kpi-item">
                <p class="kpi-title">تواصل سريع</p>
                <p class="kpi-sub">تجهيز رسالة واتساب تلقائياً حسب تفاصيل طلبك.</p>
              </div>
              <div class="kpi-item">
                <p class="kpi-title">تنظيم بالطلب</p>
                <p class="kpi-sub">قياسات أو قدرة طاقة شمسية… كل شيء داخل نموذج واحد.</p>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <section id="services">
      <div class="section-head">
        <h2 class="h2">الخدمات</h2>
        <p class="hint">خدمات رئيسية + أمثلة أعمال (بدون اقتراحات).</p>
      </div>

      <div class="grid">
        <article class="card reveal" data-spotlight>
          <h3 class="card-title">
            <svg class="svc-ico" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 21V3h16v18H4Zm2-2h12V5H6v14Z"/></svg>
            جميع أنواع الحدادة
          </h3>
          <p class="card-desc">تنفيذ أعمال حدادة متنوعة حسب الطلب.</p>
        </article>

        <article class="card reveal" data-spotlight>
          <h3 class="card-title">
            <svg class="svc-ico" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2l3 6 6 .9-4.3 4.2 1 6-5.7-3-5.7 3 1-6L3 8.9 9 8l3-6Z"/></svg>
            ديكورات حدادية
          </h3>
          <p class="card-desc">تفاصيل ديكور حديد حسب الذوق والمكان.</p>
        </article>

        <article class="card reveal" data-spotlight>
          <h3 class="card-title">
            <svg class="svc-ico" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 6h16v12H4V6Zm2 2v8h12V8H6Zm1 9h10v2H7v-2Z"/></svg>
            تنصيب منضومات الطاقة الشمسية
          </h3>
          <p class="card-desc">تنصيب وتجهيز حسب الحاجة المطلوبة.</p>
        </article>

        <article class="card reveal" data-spotlight style="grid-column: span 12;">
          <h3 class="card-title">
            <svg class="svc-ico" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M3 17l6-6 4 4 7-7 1 1-8 8-4-4-5 5H3Z"/></svg>
            أمثلة أعمال (بدون اقتراحات)
          </h3>
          <div class="chips" aria-label="أمثلة">
            <span class="chip2">أبواب</span>
            <span class="chip2">شبابيك</span>
            <span class="chip2">سقايف</span>
          </div>
        </article>
      </div>
    </section>

    <section id="process">
      <div class="section-head">
        <h2 class="h2">طريقة الشغل</h2>
        <p class="hint">خطوات بسيطة حتى يصير كل شيء واضح من البداية.</p>
      </div>

      <div class="grid">
        <div class="timeline reveal" data-spotlight>
          <div class="steps">
            <div class="step">
              <div class="step-num">1</div>
              <h3 class="step-title">استلام الطلب</h3>
              <p class="step-desc">تحدد الخدمة وتكتب التفاصيل الأساسية.</p>
            </div>
            <div class="step">
              <div class="step-num">2</div>
              <h3 class="step-title">توضيح المعلومات</h3>
              <p class="step-desc">قياسات للحدادة أو قدرة مطلوبة للطاقة الشمسية.</p>
            </div>
            <div class="step">
              <div class="step-num">3</div>
              <h3 class="step-title">تنفيذ</h3>
              <p class="step-desc">حسب الاتفاق وبالطريقة المناسبة للمشروع.</p>
            </div>
            <div class="step">
              <div class="step-num">4</div>
              <h3 class="step-title">تسليم / تنصيب</h3>
              <p class="step-desc">إكمال العمل وتسليم أو تنصيب حسب المطلوب.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="request">
      <div class="section-head">
        <h2 class="h2">طلب سريع على واتساب</h2>
        <p class="hint">اختر نوع الخدمة… والنموذج يتغير تلقائياً.</p>
      </div>

      <div class="panel reveal" data-spotlight>
        <form id="waForm" autocomplete="off">
          <div class="form-grid">
            <div class="field">
              <label for="service">نوع الخدمة</label>
              <select id="service" name="service" required>
                <option value="أبواب">أبواب</option>
                <option value="شبابيك">شبابيك</option>
                <option value="سقايف">سقايف</option>
                <option value="ديكورات">ديكورات</option>
                <option value="منضومة طاقة شمسية">منضومة طاقة شمسية</option>
                <option value="أخرى">أخرى</option>
              </select>
            </div>

            <div class="field">
              <label for="city">المنطقة / المدينة</label>
              <input id="city" name="city" type="text" placeholder="اختياري" />
            </div>

            <!-- قياسات الحدادة -->
            <div class="field" id="sizeWWrap">
              <label for="w">العرض (سم)</label>
              <input id="w" name="w" type="number" inputmode="numeric" min="0" placeholder="اختياري" />
            </div>

            <div class="field" id="sizeHWrap">
              <label for="h">الارتفاع (سم)</label>
              <input id="h" name="h" type="number" inputmode="numeric" min="0" placeholder="اختياري" />
            </div>

            <!-- حقول الطاقة الشمسية -->
            <div class="field hidden" id="solarKWWrap">
              <label for="kw">القدرة المطلوبة (kW)</label>
              <input id="kw" name="kw" type="number" inputmode="decimal" min="0" step="0.1" placeholder="مثال: 3.5" />
            </div>

            <div class="field hidden" id="solarTypeWrap">
              <label for="solarType">نوع المنظومة</label>
              <select id="solarType" name="solarType">
                <option value="غير محدد">غير محدد</option>
                <option value="On-Grid">On-Grid</option>
                <option value="Off-Grid">Off-Grid</option>
                <option value="Hybrid">Hybrid</option>
              </select>
            </div>

            <div class="field full">
              <label for="notes">تفاصيل إضافية</label>
              <textarea id="notes" name="notes" placeholder="اكتب التفاصيل: القياس/المكان/المطلوب... وتقدر ترسل صور بالواتساب بعدين"></textarea>
            </div>

            <div class="field full">
              <div class="actions">
                <button type="submit" class="btn primary">إرسال الطلب على واتساب</button>
                <button type="button" class="btn" id="copyBtn">نسخ نص الرسالة</button>
                <a class="btn" href="https://wa.me/9647766831610" target="_blank" rel="noopener">فتح واتساب مباشرة</a>
              </div>

              <div class="preview" id="msgPreview" aria-label="معاينة الرسالة"></div>
              <div class="status" id="status" aria-live="polite"></div>
            </div>
          </div>
        </form>
      </div>
    </section>

    <section id="contact">
      <div class="section-head">
        <h2 class="h2">التواصل</h2>
        <p class="hint">واتساب أسرع، وباقي الحسابات موجودة.</p>
      </div>

      <div class="panel reveal" data-spotlight>
        <div class="grid">
          <div class="card" style="grid-column: span 12;">
            <h3 class="card-title">
              <svg class="svc-ico" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2Zm0 4-8 5L4 8V6l8 5 8-5v2Z"/></svg>
              جاهزين للطلب والاستفسار
            </h3>
            <p class="card-desc" style="margin-bottom:10px;">
              رقم واتساب: <span dir="ltr" style="font-weight:1200; color:rgba(242,244,247,.92)">+964 776 683 1610</span>
            </p>

            <div class="contact-row" aria-label="روابط التواصل">
              <a class="pill wh" href="https://wa.me/9647766831610" target="_blank" rel="noopener" aria-label="واتساب">
                <svg class="mini" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2a9.8 9.8 0 0 0-9.8 9.8c0 1.7.4 3.3 1.2 4.8L2 22l5.6-1.4c1.4.7 2.9 1.1 4.4 1.1A9.8 9.8 0 0 0 21.8 12 9.8 9.8 0 0 0 12 2Zm0 17.7c-1.3 0-2.6-.3-3.7-.9l-.3-.2-3.3.8.9-3.2-.2-.3c-.7-1.2-1.1-2.6-1.1-4A7.7 7.7 0 1 1 12 19.7Z"/></svg>
                واتساب
              </a>

              <a class="pill" href="https://www.facebook.com/profile.php?id=61576592007081&mibextid=ZbWKwL" target="_blank" rel="noopener" aria-label="فيسبوك">
                <svg class="mini" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M13.5 22v-8h2.7l.4-3h-3.1V9.1c0-.9.3-1.6 1.7-1.6h1.5V4.8c-.7-.1-1.6-.2-2.7-.2-2.7 0-4.6 1.7-4.6 4.8V11H7v3h2.4v8h4.1Z"/></svg>
                فيسبوك
              </a>

              <a class="pill" href="https://www.instagram.com/halaalhadad1?igsh=Nm44ZzVqemFlN3Vw" target="_blank" rel="noopener" aria-label="إنستغرام">
                <svg class="mini" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7.8 2h8.4A5.8 5.8 0 0 1 22 7.8v8.4A5.8 5.8 0 0 1 16.2 22H7.8A5.8 5.8 0 0 1 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2Z"/></svg>
                إنستغرام
              </a>

              <a class="pill" href="https://tiktok.com/@halaalhadad111" target="_blank" rel="noopener" aria-label="تيك توك">
                <svg class="mini" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M16.6 2c.4 2.6 2 4.4 4.4 4.6v3.2c-1.6.1-3-.3-4.4-1.2v6.2c0 3.8-3.1 6.9-6.9 6.9S2.8 18.6 2.8 14.8c0-3.8 3.1-6.9 6.9-6.9.4 0 .8 0 1.2.1v3.5c-.4-.1-.8-.2-1.2-.2-1.9 0-3.5 1.6-3.5 3.5 0 1.9 1.6 3.5 3.5 3.5 2 0 3.7-1.6 3.7-4V2h3.2Z"/></svg>
                تيك توك
              </a>

              <a class="pill" href="#request" aria-label="طلب سريع">
                <svg class="mini" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M4 21V3h16v18H4Zm2-2h12V5H6v14Zm2-2v-2h8v2H8Z"/></svg>
                طلب سريع
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="footer">
        <small>© <span id="year"></span> حلا الحداد</small>
        <small>لجميع أنواع الحدادة والديكورات وتنصيب منضومات الطاقة الشمسية</small>
      </div>
    </footer>
  </main>

  <a class="wa-float" href="https://wa.me/9647766831610" target="_blank" rel="noopener" aria-label="واتساب">
    <svg class="wa-icon" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="currentColor" d="M12 2a9.8 9.8 0 0 0-9.8 9.8c0 1.7.4 3.3 1.2 4.8L2 22l5.6-1.4c1.4.7 2.9 1.1 4.4 1.1A9.8 9.8 0 0 0 21.8 12 9.8 9.8 0 0 0 12 2Zm0 17.7c-1.3 0-2.6-.3-3.7-.9l-.3-.2-3.3.8.9-3.2-.2-.3c-.7-1.2-1.1-2.6-1.1-4A7.7 7.7 0 1 1 12 19.7Zm4.6-5.1c-.3-.1-1.7-.8-2-.9s-.5-.1-.7.1-.8.9-1 1.1-.4.2-.7.1c-.3-.1-1.3-.5-2.4-1.6-.9-.8-1.5-1.9-1.7-2.2s0-.5.1-.7l.5-.6c.2-.2.2-.4.3-.6s0-.4 0-.6-.7-1.7-1-2.3c-.3-.6-.6-.5-.7-.5h-.6c-.2 0-.6.1-.9.4s-1.2 1.1-1.2 2.8 1.2 3.2 1.4 3.4c.2.2 2.4 3.6 5.9 5 .8.3 1.4.5 1.9.6.8.2 1.5.2 2.1.1.6-.1 1.7-.7 2-1.3.2-.6.2-1.2.2-1.3s-.2-.2-.5-.3Z"/>
    </svg>
    <span class="wa-tip">واتساب</span>
  </a>

  <script>
    // Year
    document.getElementById("year").textContent = new Date().getFullYear();

    // Header compact + progress
    const header = document.querySelector(".header");
    const progress = document.getElementById("progress");
    const compactAt = 18;

    function onScroll(){
      const y = window.scrollY || 0;
      header.classList.toggle("is-compact", y > compactAt);

      const doc = document.documentElement;
      const max = (doc.scrollHeight - doc.clientHeight) || 1;
      const pct = Math.max(0, Math.min(1, y / max));
      progress.style.width = (pct * 100).toFixed(2) + "%";
    }
    window.addEventListener("scroll", onScroll, {passive:true});
    onScroll();

    // Reveal on scroll
    const revealEls = Array.from(document.querySelectorAll(".reveal"));
    const io = new IntersectionObserver((entries) => {
      for (const e of entries) {
        if (e.isIntersecting) e.target.classList.add("is-in");
      }
    }, { threshold: 0.12 });
    revealEls.forEach(el => io.observe(el));

    // Spotlight hover glow
    function attachSpotlight(el){
      let raf = null;
      const rectData = {left:0, top:0, width:1, height:1};

      function updateRect(){
        const r = el.getBoundingClientRect();
        rectData.left = r.left; rectData.top = r.top;
        rectData.width = Math.max(1, r.width); rectData.height = Math.max(1, r.height);
      }
      updateRect();

      const ro = new ResizeObserver(updateRect);
      ro.observe(el);

      el.addEventListener("pointerenter", updateRect, {passive:true});
      el.addEventListener("pointermove", (ev) => {
        if (raf) return;
        raf = requestAnimationFrame(() => {
          raf = null;
          const x = ((ev.clientX - rectData.left) / rectData.width) * 100;
          const y = ((ev.clientY - rectData.top) / rectData.height) * 100;
          el.style.setProperty("--mx", x.toFixed(2) + "%");
          el.style.setProperty("--my", y.toFixed(2) + "%");
        });
      }, {passive:true});

      el.addEventListener("pointerleave", () => {
        el.style.setProperty("--mx", "50%");
        el.style.setProperty("--my", "30%");
      }, {passive:true});
    }
    document.querySelectorAll("[data-spotlight]").forEach(attachSpotlight);

    // Magnetic buttons (subtle)
    function magnetic(btn){
      let raf=null;
      let rect=null;
      function upd(){ rect = btn.getBoundingClientRect(); }
      upd();
      new ResizeObserver(upd).observe(btn);

      btn.addEventListener("pointerenter", upd, {passive:true});
      btn.addEventListener("pointermove", (e) => {
        if (!rect) return;
        if (raf) return;
        raf = requestAnimationFrame(() => {
          raf=null;
          const x = (e.clientX - rect.left) / rect.width - 0.5;
          const y = (e.clientY - rect.top) / rect.height - 0.5;
          btn.style.transform = `translate(${(x*6).toFixed(2)}px, ${(y*6).toFixed(2)}px)`;
        });
      }, {passive:true});
      btn.addEventListener("pointerleave", () => { btn.style.transform = ""; }, {passive:true});
    }
    document.querySelectorAll(".btn").forEach(magnetic);

    // WhatsApp message builder + dynamic fields
    const waForm = document.getElementById("waForm");
    const serviceEl = document.getElementById("service");
    const cityEl = document.getElementById("city");
    const wEl = document.getElementById("w");
    const hEl = document.getElementById("h");
    const notesEl = document.getElementById("notes");
    const kwEl = document.getElementById("kw");
    const solarTypeEl = document.getElementById("solarType");

    const sizeWWrap = document.getElementById("sizeWWrap");
    const sizeHWrap = document.getElementById("sizeHWrap");
    const solarKWWrap = document.getElementById("solarKWWrap");
    const solarTypeWrap = document.getElementById("solarTypeWrap");

    const previewEl = document.getElementById("msgPreview");
    const statusEl = document.getElementById("status");
    const copyBtn = document.getElementById("copyBtn");

    function isSolar(){
      return (serviceEl.value || "") === "منضومة طاقة شمسية";
    }

    function syncFields(){
      const solar = isSolar();
      sizeWWrap.classList.toggle("hidden", solar);
      sizeHWrap.classList.toggle("hidden", solar);

      solarKWWrap.classList.toggle("hidden", !solar);
      solarTypeWrap.classList.toggle("hidden", !solar);

      refreshPreview();
    }

    function buildMessage(){
      const service = (serviceEl.value || "").trim();
      const city = (cityEl.value || "").trim();
      const notes = (notesEl.value || "").trim();

      const w = (wEl.value || "").trim();
      const h = (hEl.value || "").trim();

      const kw = (kwEl.value || "").trim();
      const solarType = (solarTypeEl.value || "").trim();

      const lines = [];
      lines.push("السلام عليكم");
      lines.push("أريد طلب:");
      lines.push(`- الخدمة: ${service || "—"}`);

      if (isSolar()){
        if (kw) lines.push(`- القدرة المطلوبة: ${kw} kW`);
        else lines.push("- القدرة المطلوبة: (غير محددة)");
        if (solarType) lines.push(`- نوع المنظومة: ${solarType}`);
      } else {
        if (w || h) {
          lines.push(`- القياس: ${w ? (w + " سم") : "—"} عرض × ${h ? (h + " سم") : "—"} ارتفاع`);
        } else {
          lines.push("- القياس: (سأرسل قياس/صورة)");
        }
      }

      if (city) lines.push(`- المنطقة: ${city}`);
      if (notes) lines.push(`- التفاصيل: ${notes}`);

      lines.push("");
      lines.push("ممكن السعر والوقت المتوقع؟");

      return lines.join("\n");
    }

    function refreshPreview(){
      previewEl.textContent = buildMessage();
    }

    function flashStatus(text){
      statusEl.textContent = text;
      statusEl.classList.add("on");
      clearTimeout(flashStatus._t);
      flashStatus._t = setTimeout(() => statusEl.classList.remove("on"), 1400);
    }

    [serviceEl, cityEl, wEl, hEl, notesEl, kwEl, solarTypeEl].forEach(el => {
      el.addEventListener("input", refreshPreview, {passive:true});
      el.addEventListener("change", refreshPreview, {passive:true});
    });
    serviceEl.addEventListener("change", syncFields, {passive:true});
    syncFields();

    waForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const msg = buildMessage();
      const url = "https://wa.me/9647766831610?text=" + encodeURIComponent(msg);
      window.open(url, "_blank", "noopener");
      flashStatus("تم تجهيز الرسالة وفتح واتساب.");
    });

    copyBtn.addEventListener("click", async () => {
      const msg = buildMessage();
      try{
        await navigator.clipboard.writeText(msg);
        flashStatus("تم نسخ نص الرسالة.");
      }catch(err){
        const ta = document.createElement("textarea");
        ta.value = msg;
        document.body.appendChild(ta);
        ta.select();
        try{ document.execCommand("copy"); flashStatus("تم نسخ نص الرسالة."); }
        catch(e){ flashStatus("تعذر النسخ. انسخ النص يدوياً من المعاينة."); }
        document.body.removeChild(ta);
      }
    });

    // Sparks engine (canvas)
    (function sparks(){
      const canvas = document.getElementById("sparks");
      const host = canvas.closest(".hero-shell");
      if (!canvas || !host) return;

      const reduce = window.matchMedia("(prefers-reduced-motion: reduce)").matches;
      const ctx = canvas.getContext("2d", { alpha: true });

      let w=1, h=1, dpr=1;
      let running = !reduce;

      function resize(){
        const r = host.getBoundingClientRect();
        dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        w = Math.max(1, Math.floor(r.width));
        h = Math.max(1, Math.floor(r.height));
        canvas.width = Math.floor(w * dpr);
        canvas.height = Math.floor(h * dpr);
        canvas.style.width = w + "px";
        canvas.style.height = h + "px";
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      resize();
      new ResizeObserver(resize).observe(host);
      window.addEventListener("resize", resize, {passive:true});

      const particles = [];
      const MAX = 140;

      function addSpark(x, y, strength){
        const count = Math.max(2, Math.min(10, strength|0));
        for (let i=0;i<count;i++){
          if (particles.length > MAX) particles.shift();
          const ang = (-Math.PI/2) + (Math.random()*1.2 - 0.6);
          const sp = 2.2 + Math.random()*3.6;
          particles.push({
            x, y,
            vx: Math.cos(ang) * sp * (0.8 + Math.random()*0.6),
            vy: Math.sin(ang) * sp * (0.8 + Math.random()*0.6),
            life: 32 + Math.random()*28,
            age: 0,
            size: 1.0 + Math.random()*1.6,
            hue: 28 + Math.random()*14,
            glow: 0.55 + Math.random()*0.45
          });
        }
      }

      let t=0;
      function tick(){
        if (!running) return;
        t++;

        ctx.clearRect(0,0,w,h);

        if (t % 8 === 0){
          const x = w * (0.12 + Math.random()*0.76);
          const y = h * (0.22 + Math.random()*0.45);
          addSpark(x, y, 2 + (Math.random()*3)|0);
        }

        for (let i=particles.length-1; i>=0; i--){
          const p = particles[i];
          p.age++;
          const k = p.age / p.life;
          if (k >= 1){
            particles.splice(i,1);
            continue;
          }

          p.vx *= 0.985;
          p.vy *= 0.985;
          p.vy += 0.05;
          p.x += p.vx;
          p.y += p.vy;

          if (p.x < -10 || p.x > w+10 || p.y > h+12) {
            particles.splice(i,1);
            continue;
          }

          const alpha = (1 - k) * 0.9;

          ctx.beginPath();
          ctx.fillStyle = `hsla(${p.hue}, 100%, 62%, ${alpha * 0.85})`;
          ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
          ctx.fill();

          ctx.beginPath();
          ctx.strokeStyle = `hsla(${p.hue}, 100%, 62%, ${alpha * 0.55})`;
          ctx.lineWidth = 1.25;
          ctx.moveTo(p.x, p.y);
          ctx.lineTo(p.x - p.vx*2.2, p.y - p.vy*2.2);
          ctx.stroke();

          ctx.beginPath();
          ctx.fillStyle = `hsla(${p.hue}, 100%, 62%, ${alpha * p.glow * 0.18})`;
          ctx.arc(p.x, p.y, p.size * 5.2, 0, Math.PI*2);
          ctx.fill();
        }

        requestAnimationFrame(tick);
      }

      let pointerInside = false;
      function toLocal(ev){
        const r = host.getBoundingClientRect();
        return { x: ev.clientX - r.left, y: ev.clientY - r.top };
      }
      host.addEventListener("pointerenter", () => { pointerInside = true; }, {passive:true});
      host.addEventListener("pointerleave", () => { pointerInside = false; }, {passive:true});
      host.addEventListener("pointermove", (ev) => {
        if (!pointerInside || reduce) return;
        const p = toLocal(ev);
        if (p.x < 0 || p.y < 0 || p.x > w || p.y > h) return;
        addSpark(p.x, p.y, 2 + (Math.random()*4)|0);
      }, {passive:true});

      const vis = new IntersectionObserver((entries) => {
        running = entries.some(e => e.isIntersecting) && !reduce;
        if (running) requestAnimationFrame(tick);
      }, {threshold: 0.02});
      vis.observe(host);

      requestAnimationFrame(tick);
    })();
  </script>
</body>
</html>
```0
